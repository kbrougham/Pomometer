<p id="notice"><%= notice %></p>

<tr>
    <td>
      <h1 style="text-align:right"><%=@task.name%></h1>
    </td>
    <td>
      <h4><%= link_to 'New Result', new_result_path %></h4>
    </td>
 </tr>

<tr>
  <td colspan='2'>
    <%= time_zone_select( "user", "time_zone", nil, default: Time.zone )%>   
  </td>
</tr>

<table class='main' width='70%'>
  
  <% if @results.empty? %>
    <tr>
      <td>
        <h2 style="text-align:center">You don't have any results added yet, please add results above.</h2>
      </td>
    </tr>
  <% else %>

  	<tr class='table_header'>
  		<td width='10%'>Goal</td>
  	    <td width='30%'>Notes</td>
  	    <td width='15%'>Started At</td>
  	    <td width='10%'>Duration</td>
  	    <td width='15%'>Ended At</td>
  	</tr>

    <% @results.each do |result| %>
    	<tr class="<%= cycle('alternating_even', 'alternating_odd') -%>">
        <td width='10%' style="text-align:center"><%= link_to result.goal, edit_result_path(result) %></td>
        <td width='30%'><%= result.notes %></td>
        <td width='15%' style="text-align:center" id=<%="started_at_"+result.id.to_s%>><%=result.started_at.in_time_zone %></td>
        <!--.in_time_zone("Eastern Time (US & Canada)")-->
        <td width='10%' style="text-align:center"><%= result.duration %> mins</td>
        <td width='15%' style="text-align:center" id=<%="ended_at_"+result.id.to_s%>><%= result.ended_at.in_time_zone%></td>
        <td width='10%' style="text-align:center"><%= link_to 'Edit', edit_result_path(result) %></td>
        <td width='10%' style="text-align:center"><%= link_to 'Delete', result, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  <% end %>
</table>

<script>
  $('#user_time_zone').bind('change', function() {
    var selected_time_zone = $('#user_time_zone').val()
    console.log(selected_time_zone)
     
    
  })
</script>